/** * Created by zzq on 2017/5/3. */define(['app', 'loadCss', 'myService', 'jQueryUI'], function (app, loadCss) {    //引入css    loadCss.loadCss('res/lib/jquery-ui/jquery-ui.min.css');    loadCss.loadCss('res/css/home.css');    app.controller('homeController', function ($scope, myService, $state, $timeout) {        //ajax获取控制面板当前布局currentLayout        $scope.currentlayOut = [            {                id: "item_1",                title: '用户列表',                router: 'item1',                w: 300,                h: 200            },            {                id: "item_2",                title: "用户信息",                router: 'item1',                w: 300,                h: 200            },            {                id: "item_3",                title: "产品列表",                router: 'item1',                w: 300,                h: 200            }        ];        //新增面板        $scope.newModule = {            colWidth: '',            title: '',            id: '',            colWidth: '',            height: 300,            sref: ''        }        $scope.showModel = false;        $scope.addPanel = function () {            $scope.showModel = true;        };        $scope.ensure = function () {            console.log($scope.newModule);            //这里直接在页面内添加ng和zui会冲突，所以选择，先把数据提交到后台，再重新渲染当前路由            $scope.currentlayOut.push($scope.newModule);            $scope.showModel = false;            $scope.newModule = {                colWidth: '',                title: '',                id: '',                colWidth: '',                height: 300,                sref: ''            };            //重新渲染当前路由            $state.reload('home')        };        $scope.exit = function () {            $scope.showModel = false;            $scope.newModule = {                colWidth: '',                title: '',                id: '',                colWidth: '',                height: 300,                sref: ''            }        }        // 新增面板结束        // 初始化排序缩放面板        $("#sortable").sortable({            appendTo: 'parent',            cancel: '.sort-disabled',              // 拖这个位置拖不动            containment: '#sortable',   // 拖拽时被限制在此内            cursor: 'move',             // 定义当排序时被显示的光标。            handle: '.sort-handle',     // 设置之后只有拖拽这个元素才能进行排序            items: '.sort-item',        // 指定哪个元素是用来排序的            revert: true,               // 动画            scroll: true,               // 拖拽至边缘时滚动            scrollSensitivity: 100,     // 距边缘多远时开始滚动            tolerance: 'pointer',       // 鼠标指针移动到另一个项目时开始排序            update: function () {                console.log('排序结束')                var sortedIDs = $("#sortable").sortable("toArray");                console.log(sortedIDs); // ["sort-1", "sort-4", "sort-3", "sort-2", "sort-5"]            }        });        $scope.renderFinish = function () {            $('.sort-item').resizable({                autoHide: true,                grid: [0, 30],                // 事件                stop: function (event, ui) {      // 当调整尺寸操作停止时触发。                    console.log('尺寸调整结束')                    console.log(ui.element[0].id);// 获取到是哪个调整了尺寸                    console.log(ui.size)                }            })        }        // 面板初始化结束        // 删除一个面板        $scope.destoryItem = function (index) {            var con = confirm('确认？');            console.log(index);            if (con) {                $scope.currentlayOut.splice(index, 1);            }        }    })})