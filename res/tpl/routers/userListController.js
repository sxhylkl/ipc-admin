define(function(require){var app=require("app");require("myService"),loadCss=require("loadCss"),loadCss.loadCss("res/css/userList.css"),app.controller("userListController",function($scope,myService,storage){console.log(storage),$scope.dateOption={startTime:"",endTime:""},$scope.startDateOptions={formatYear:"yy",maxDate:new Date,startingDay:1},$scope.endDateOptions={formatYear:"yy",maxDate:new Date,startingDay:1},$scope.updateMin=function(){$scope.endDateOptions.minDate=$scope.dateOption.startTime,$scope.pageInfo.startTime=isNaN(new Date($scope.dateOption.startTime).getTime())?"":new Date($scope.dateOption.startTime).getTime()},$scope.updateMax=function(){$scope.startDateOptions.maxDate=$scope.dateOption.endTime,$scope.pageInfo.endTime=isNaN(new Date($scope.dateOption.endTime).getTime())?"":new Date($scope.dateOption.endTime).getTime()},$scope.startOpen=function(){$scope.startPopupOpened=!0},$scope.endOpen=function(){$scope.endPopupOpened=!0},$scope.startPopupOpened=!1,$scope.endPopupOpened=!1,$scope.devStatus=[{statusName:"未激活",statusId:"0"},{statusName:"激活",statusId:"1"},{statusName:"失效",statusId:"-1"},{statusName:"默认",statusId:""}];var showUserList=function(url,requestData,method){myService.getJson(url,requestData,method).success(function(data){$scope.userInfoList=data.userInfoList,$scope.totalCount=data.totalCount,$scope.maxSize=5,$scope.startPage=$scope.pageInfo.startPage})};$scope.pageInfo={loginType:"",loginName:"",p2pId:"",startTime:"",endTime:"",startPage:1,pageSize:storage.get("pageSize"),devStatus:""};var url="kinzo-cms/user/accounts";showUserList(url,$scope.pageInfo),$scope.pageChange=function(){$scope.pageInfo.startPage=$scope.startPage,showUserList(url,$scope.pageInfo)},$scope.goSearch=function(){$scope.pageInfo.startPage=1,console.log($scope.pageInfo),console.log($scope.pageInfo.startTime),showUserList(url,$scope.pageInfo)},$scope.pageSizeChange=function(){$scope.pageInfo.pageSize=$scope.pageSize,storage.set("pageSize",$scope.pageSize),showUserList(url,$scope.pageInfo)}}).filter("hideText",function(){return function(val){return val.substr(0,3)+"..."+val.substr(val.length-3)}})});