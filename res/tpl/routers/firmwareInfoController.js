define(function(require){var app=require("app");require("myService"),require("loadCss").loadCss("res/css/firmwareInfo.css"),app.controller("firmwareInfoController",function($scope,myService){function init(){$scope.inputCan=!0,myService.getJson("/kinzo-cms/current-firmwareInfo").success(function(data){$scope.backupFirmwareInfo=JSON.parse(JSON.stringify(data)),$scope.firmwareInfo=data}),myService.getJson("kinzo-cms/current-firmwareInfo/back").success(function(data){$scope.newFirmwareInfo=data}),$scope.pageInfo={startPage:1,pageSize:2},function(url,requestDate){myService.getJson(url,requestDate).success(function(data){$scope.historyFirmList=data.firmwareList,$scope.totalCount=data.totalCount,$scope.maxSize=5,$scope.startPage=$scope.pageInfo.startPage})}("kinzo-cms/history-firmwareList",$scope.pageInfo)}init(),$scope.changeCurrentFirmwareInfo=function(){$scope.inputCan=!1},$scope.resetCurrentFirmwareInfo=function(){console.log($scope.backupFirmwareInfo),$scope.firmwareInfo=$scope.backupFirmwareInfo,$scope.inputCan=!0},$scope.updateCurrentFirmwareInfo=function(){myService.getJson("kinzo-cms/current-firmwareInfo",$scope.firmwareInfo,"POST").success(function(){$scope.inputCan=!0,layer.msg("修改成功",{icon:1,time:1500}),init()})},$scope.upDate=function(){console.log($scope.newFirmwareInfo),myService.getJson("kinzo-cms/current-firmwareInfo/update",$scope.newFirmwareInfo,"POST").success(function(){layer.msg("更新成功",{icon:1,time:1500})}),$scope.newFirmwareInfo={},myService.getJson("kinzo-cms/current-firmwareInfo/saveDate",$scope.newFirmwareInfo,"POST"),init()},$scope.saveDate=function(){console.log($scope.newFirmwareInfo),myService.getJson("kinzo-cms/current-firmwareInfo/saveDate",$scope.newFirmwareInfo,"POST").success(function(){layer.msg("保存完成",{icon:1,time:1500})})}})});